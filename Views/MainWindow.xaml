<Controls:MetroWindow x:Class="LeagueSharp.Loader.Views.MainWindow"
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
                      xmlns:tb="http://www.hardcodet.net/taskbar"
                      Title="LeagueSharp" 
                      Height="463" 
                      Width="770"
                      ResizeMode="CanMinimize" WindowStartupLocation="CenterScreen" 
                      Loaded="MainWindow_OnLoaded" 
                      Activated="MainWindow_OnActivated"
                      Closing="MainWindow_OnClosing"
                      StateChanged="MainWindow_OnStateChanged">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <TabControl Margin="10" Grid.ColumnSpan="2">
            <TabItem Header="News">
                <Grid Background="#FFE5E5E5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <tb:TaskbarIcon x:Name="TrayIcon"
                                    Visibility="Visible"
                                    ToolTipText="LeagueSharp"
                                    TrayMouseDoubleClick="TrayIcon_OnTrayMouseDoubleClick"
                                    TrayLeftMouseUp="TrayIcon_OnTrayLeftMouseUp">
                        <tb:TaskbarIcon.ContextMenu>
                            <ContextMenu Style="{x:Null}">
                                <MenuItem x:Name="TrayMenuClose" Header="Close" Click="TrayMenuClose_OnClick"/>
                            </ContextMenu>
                        </tb:TaskbarIcon.ContextMenu>
                    </tb:TaskbarIcon>
                    <WebBrowser x:Name="Browser" Visibility="Visible" Margin="10" Source="https://rawgit.com/LeagueSharp/LeagueSharpLoader/master/News.html" Grid.ColumnSpan="2"/>
                </Grid>
            </TabItem>
            <TabItem Header="Assemblies">
                <Grid Background="#FFE5E5E5" Margin="0,2,0,-2">
                    <DataGrid x:Name="InstalledAssembliesDataGrid"
                              HorizontalAlignment="Left" 
                              Margin="10,41,0,0" 
                              VerticalAlignment="Top"
                              Height="323"
                              Width="716" 
                              CanUserAddRows="False"
                              AutoGenerateColumns="False"
                              ContextMenuOpening="InstalledAssembliesDataGrid_OnContextMenuOpening"
                              ItemsSource="{Binding Config.InstalledAssemblies}">
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem x:Name="UpdateAndCompileMenuItem" Header="Update and Compile" Click="UpdateAndCompileMenuItem_OnClick">
                                    <MenuItem.Icon>
                                        <Canvas Width="10"
                                        Height="15"
                                        Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">
                                            <Path Canvas.Left="0"
                                        Canvas.Top="0"
                                        Width="15"
                                        Height="15"
                                         Data="F1 M 18,33.5001L 18,27L 27,19L 36,27.5001L 36,33.5001L 30,28.2097L 30,40.5C 30,46.299 34.701,51 40.5,51C 46.299,51 51,46.299 51,40.5C 51,34.8686 46.5668,30.2727 41,30.0117L 41,24.0074C 49.8814,24.2718 57,31.5546 57,40.5C 57,49.6127 49.6127,57 40.5,57C 31.3873,57 24,49.6127 24,40.5L 24,28.125L 18,33.5001 Z "
                                                  Fill="{DynamicResource BlackBrush}"
                                        Stretch="Fill" />
                                        </Canvas>
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem x:Name="RemoveMenuItem" Header="Uninstall" Click="RemoveMenuItem_OnClick">
                                    <MenuItem.Icon>
                                        <Canvas Width="10"
                                        Height="15"
                                        Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">
                                            <Path Canvas.Left="0"
                                        Canvas.Top="0"
                                        Width="15"
                                        Height="15"
                                        Data="F1 M 25.3333,23.75L 50.6667,23.75C 51.5411,23.75 51.8541,27.3125 51.8541,27.3125L 24.1458,27.3125C 24.1458,27.3125 24.4589,23.75 25.3333,23.75 Z M 35.625,19.7917L 40.375,19.7917C 40.8122,19.7917 41.9583,20.9378 41.9583,21.375C 41.9583,21.8122 40.8122,22.9584 40.375,22.9584L 35.625,22.9584C 35.1878,22.9584 34.0416,21.8122 34.0416,21.375C 34.0416,20.9378 35.1878,19.7917 35.625,19.7917 Z M 27.7083,28.5L 48.2916,28.5C 49.1661,28.5 49.875,29.2089 49.875,30.0834L 48.2916,53.8334C 48.2916,54.7078 47.5828,55.4167 46.7083,55.4167L 29.2917,55.4167C 28.4172,55.4167 27.7083,54.7078 27.7083,53.8334L 26.125,30.0834C 26.125,29.2089 26.8339,28.5 27.7083,28.5 Z M 30.0833,31.6667L 30.4792,52.25L 33.25,52.25L 32.8542,31.6667L 30.0833,31.6667 Z M 36.4167,31.6667L 36.4167,52.25L 39.5833,52.25L 39.5833,31.6667L 36.4167,31.6667 Z M 43.1458,31.6667L 42.75,52.25L 45.5208,52.25L 45.9167,31.6667L 43.1458,31.6667 Z "
                                        Fill="{DynamicResource BlackBrush}"
                                        Stretch="Fill" />
                                        </Canvas>
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem x:Name="GithubItem" Header="Github" Click="GithubItem_OnClick">
                                    <MenuItem.Icon>
                                        <Canvas Width="10"
                                        Height="15"
                                        Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">
                                            <Path Canvas.Left="0"
                                        Canvas.Top="0"
                                        Width="15"
                                        Height="15"
                                        Data="F1 M 49.4162,18.9999C 50.0612,20.4651 50.4791,22.8974 49.8556,24.6785C 52.4052,26.8554 53.2817,32.1482 52.0513,36.4723C 55.6852,36.7501 60.0132,36.3394 62.8071,37.4547C 60.1951,37.1189 56.6285,36.4602 53.2591,36.6895C 52.6207,36.7325 51.6753,36.6652 51.7216,37.5633C 55.6213,37.8692 59.4967,38.2027 62.6985,39.2016C 59.5232,38.6829 55.6676,37.8934 51.7216,37.7827C 50.0915,40.9998 46.8109,42.5804 42.2823,42.9133C 42.769,43.9729 43.7012,44.3758 43.9294,46.0804C 44.269,48.6255 43.398,52.3543 44.2569,54.0511C 44.6693,54.8637 45.3412,54.8857 45.7944,55.5803C 44.6852,56.8935 41.9355,55.4337 41.6224,54.0511C 41.086,51.6835 42.4394,48.0126 40.9642,46.4078C 41.0689,48.9899 40.3539,52.6172 41.0744,54.9243C 41.3583,55.8317 42.1781,56.1818 41.9526,56.9999C 36.7977,57.5236 38.9509,50.3273 38.1092,46.0804C 37.3319,46.1355 37.6731,47.2452 37.6711,47.7181C 37.6483,51.8664 38.5193,57.555 34.0491,56.9999C 33.9173,56.1289 34.6483,55.8317 34.9261,55.0357C 35.7426,52.7016 34.7734,49.2242 35.1483,46.4078C 33.4416,47.6939 35.3269,52.1851 34.2696,54.4877C 33.6599,55.8125 31.6974,56.3896 30.2084,55.7975C 30.4019,54.8107 31.4217,54.9701 31.8534,54.0511C 32.4576,52.7689 31.8578,50.9232 32.0739,49.0285C 28.9151,49.6586 26.4658,48.937 25.2676,46.9536C 24.731,46.0627 24.5976,45.0131 23.9493,44.2243C 23.3043,43.4348 22.274,43.3285 21.9746,42.2595C 25.8864,41.3179 26.0358,46.2849 29.5491,46.4078C 30.6262,46.447 31.1858,46.0964 32.183,45.8626C 32.462,44.6101 33.0595,43.6762 33.9388,43.0219C 29.5689,42.4238 25.9587,41.0627 24.2801,37.7827C 20.3061,37.9784 16.6698,38.5092 13.3021,39.3102C 16.3589,38.2 20.1296,37.8019 24.1703,37.6718C 23.9322,36.2402 21.8446,36.6338 20.548,36.6895C 18.1395,36.7959 15.1075,37.0952 13.193,37.4547C 15.9691,36.4651 19.8622,36.5886 23.6218,36.5809C 22.4724,32.9756 22.8705,27.2485 25.3782,25.1156C 24.6676,23.3245 24.8881,20.3951 25.8175,18.9999C 28.6169,19.1261 30.3148,20.3466 32.0739,21.5125C 34.2558,20.8918 36.5491,20.5837 39.538,20.7473C 40.7955,20.8174 42.1025,21.3819 43.0491,21.2926C 43.978,21.2055 45.0022,20.163 45.903,19.765C 47.0788,19.2463 48.0728,19.0484 49.4162,18.9999 Z "
                                        Fill="{DynamicResource BlackBrush}"
                                        Stretch="Fill" />
                                        </Canvas>
                                    </MenuItem.Icon>
                                </MenuItem>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                        <DataGrid.Columns>
                            <DataGridCheckBoxColumn Binding="{Binding InjectChecked, UpdateSourceTrigger=PropertyChanged}"
                                                    EditingElementStyle="{DynamicResource MetroDataGridCheckBox}"
                                                    ElementStyle="{DynamicResource MetroDataGridCheckBox}"
                                                    Width="35"
                                                    />
                            <DataGridTextColumn Header="Name" Width="200" Binding="{Binding DisplayName, UpdateSourceTrigger=PropertyChanged}"/>
                            <DataGridTextColumn Header="Type" Width="75" Binding="{Binding Type}" IsReadOnly="True"/>
                            <DataGridTextColumn Header="Version" Width="110" Binding="{Binding Version}" IsReadOnly="True"/>
                            <DataGridTextColumn Header="Location" Width="*" Binding="{Binding Location}" IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Button x:Name="InstallButton" Content="Install new assembly" HorizontalAlignment="Left" Margin="595,10,0,0" VerticalAlignment="Top" Width="131" RenderTransformOrigin="1.08,-0.48" Click="InstallButton_Click"/>
                    <TextBox x:Name="SearchTextBox" HorizontalAlignment="Left" Height="23" Margin="10,9,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="173" TextChanged="TextBoxBase_OnTextChanged" />
                </Grid>
            </TabItem>
            <TabItem Header="Log" HorizontalAlignment="Left" Height="36" VerticalAlignment="Top" Width="60">
                <Grid Background="#FFE5E5E5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <DataGrid x:Name="LogsDataGrid" 
                              Margin="10" 
                              ItemsSource="{Binding Logs.MainLog.Items}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False">

                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}"/>
                            <DataGridTextColumn Header="Source" Binding="{Binding Source}"/>
                            <DataGridTextColumn Header="Content" Width="500" Binding="{Binding Message}"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
            <TabItem Header="Settings" Height="36" VerticalAlignment="Top" Margin="351,0,-351,0">
                <Grid Background="#FFE5E5E5">
                    <Button Content="Logout" Margin="0,0,10,10" RenderTransformOrigin="0.947,1.44" Height="25" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="75" Click="ButtonBase_OnClick"/>
                    <DataGrid Margin="10,10,10,66"
                              x:Name="GameSettingsDataGrid"
                              CanUserAddRows="False"
                              AutoGenerateColumns="False"
                                ItemsSource="{Binding Config.Settings.GameSettings}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Game Settings" Width="*" Binding="{Binding Name}" IsReadOnly="True"/>
                            <DataGridComboBoxColumn Width="*">
                                <DataGridComboBoxColumn.ElementStyle>
                                    <Style>
                                        <Setter Property="ComboBox.ItemsSource" Value="{Binding PosibleValues}" />
                                        <Setter Property="ComboBox.SelectedValue" Value="{Binding SelectedValue, UpdateSourceTrigger=PropertyChanged}" />
                                    </Style>
                                </DataGridComboBoxColumn.ElementStyle>
                                <DataGridComboBoxColumn.EditingElementStyle>
                                    <Style>
                                        <Setter Property="ComboBox.ItemsSource" Value="{Binding PosibleValues}" />
                                        <Setter Property="ComboBox.SelectedValue" Value="{Binding SelectedValue, UpdateSourceTrigger=PropertyChanged }" />
                                    </Style>
                                </DataGridComboBoxColumn.EditingElementStyle>
                            </DataGridComboBoxColumn>

                        </DataGrid.Columns>
                    </DataGrid>
                    <CheckBox IsChecked="{Binding Config.UpdateOnLoad, UpdateSourceTrigger=PropertyChanged}" Content="Update the assemblies at the start" HorizontalAlignment="Left" Margin="10,323,0,0" VerticalAlignment="Top"/>
                    <CheckBox Content="Install" HorizontalAlignment="Left" Margin="10,346,0,0" VerticalAlignment="Top" Width="169" IsChecked="{Binding Config.Install, UpdateSourceTrigger=PropertyChanged}"/>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Controls:MetroWindow>
